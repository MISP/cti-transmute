{% extends "base.html" %}

{% block content %}
<div class="container my-5">
    <h2 class="mb-4 text-info">CTI Transmute API Endpoints</h2>
    <p class="mb-4 text-light">
        Use these endpoints to convert Cyber Threat Intelligence (CTI) files between MISP and STIX formats.
        Click on a card to navigate to the corresponding conversion page.
    </p>

    <div class="row g-3">
        <!-- MISP → STIX -->
        <div class="col-md-4">
            <div class="card bg-secondary text-light shadow clickable-card" 
                 style="cursor:pointer;" 
                 @click="goTo('convert/misp_to_stix')">
                <div class="card-body">
                    <h5 class="card-title text-warning"><i class="fas fa-arrow-right me-2"></i>MISP → STIX</h5>
                    <p class="card-text">Convert a MISP data collection into STIX format.</p>
                    <span class="badge bg-info text-dark">POST</span>
                </div>
            </div>
        </div>

        <!-- STIX → MISP -->
        <div class="col-md-4">
            <div class="card bg-secondary text-light shadow clickable-card" 
                 style="cursor:pointer;" 
                 @click="goTo('convert/stix_to_misp')">
                <div class="card-body">
                    <h5 class="card-title text-warning"><i class="fas fa-arrow-left me-2"></i>STIX → MISP</h5>
                    <p class="card-text">Convert STIX data collection into MISP format.</p>
                    <span class="badge bg-info text-dark">POST</span>
                </div>
            </div>
        </div>

        <!-- List available converters -->
        <div class="col-md-4">
            <div class="card bg-secondary text-light shadow clickable-card" 
                 style="cursor:pointer;" 
                 @click="goTo('/list')">
                <div class="card-body">
                    <h5 class="card-title text-warning"><i class="fas fa-list me-2"></i>List Converters</h5>
                    <p class="card-text">View all available conversion operations with their parameters.</p>
                    <span class="badge bg-info text-dark">GET</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block script %}
<script type="module">
const { createApp, ref } = Vue
createApp({
    delimiters: ['[[', ']]'],
    setup() {
        const result = ref('')

        // Function to navigate to a URL
        function goTo(url) {
            window.location.href = url
        }

        return { result, goTo }
    }
}).mount('#main-container')
</script>
{% endblock %}
