{% extends 'base.html' %}
{% import 'macros/form_macros.html' as f %}

{% block content %}
<form action="" method="post" id="main-container" class="my-5">
    {{ form.hidden_tag() }}
    <h2 class=" mb-3 ">
        Edit Profile 
    </h2>
    <div >
        <div class="row g-3">
            <!-- First name -->
            <div class="col-md-6">
                <label for="{{ form.first_name.id }}" class="form-label">
                    {{ form.first_name.label }} <span class="text-danger">*</span>
                </label>
                {{ form.first_name(class_="form-control" , style="background-color:var(--color-navbar); color:var(--color-text);") }}
                {% if form.first_name.errors %}
                    <div class="text-danger mt-1 small">{{ form.first_name.errors[0] | safe }}</div>
                {% endif %}
            </div>

            <!-- Last name -->
            <div class="col-md-6">
                <label for="{{ form.last_name.id }}" class="form-label">
                    {{ form.last_name.label }} <span class="text-danger">*</span>
                </label>
                {{ form.last_name(class_="form-control" , style="background-color:var(--color-navbar); color:var(--color-text);") }}
                {% if form.last_name.errors %}
                    <div class="text-danger mt-1 small">{{ form.last_name.errors[0] | safe }}</div>
                {% endif %}
            </div>
        </div>

        <!-- Email -->
        <div class="mt-3">
            <label for="{{ form.email.id }}" class="form-label">
                {{ form.email.label }} <span class="text-danger">*</span>
            </label>
            {{ form.email(class_="form-control" , style="background-color:var(--color-navbar); color:var(--color-text);") }}
            {% if form.email.errors %}
                <div class="text-danger mt-1 small">{{ form.email.errors[0] | safe }}</div>
            {% endif %}
        </div>

        <!-- Password -->
        <div class="mt-3 position-relative">
            <label for="{{ form.password.id }}" class="form-label">
                {{ form.password.label }} <span class="text-danger">*</span>
            </label>
            <small class=" d-block mb-2">
                Leave blank to keep your current password. For security reasons, it cannot be shown.
            </small>

            <div class="input-group">
                {{ form.password(class_="form-control ", id="passwordInput" , style="background-color:var(--color-navbar); color:var(--color-text);") }}
                <span class="input-group-text" style="cursor:pointer;" onclick="togglePassword()">
                    <i class="fa fa-eye" id="togglePasswordIcon"></i>
                </span>
            </div>

            {% if form.password.errors %}
                <div class="text-danger mt-1 small">{{ form.password.errors[0] | safe }}</div>
            {% endif %}
        </div>

        <!-- Submit -->
        <div class="mt-4 text-center">
            {{ form.submit(class_="btn btn-success  px-4") }}
        </div>
    </div>
</form>

{% endblock %}

{% block script %}
<script>
function togglePassword() {
    const passwordInput = document.getElementById("passwordInput");
    const icon = document.getElementById("togglePasswordIcon");
    const isPassword = passwordInput.type === "password";
    passwordInput.type = isPassword ? "text" : "password";
    icon.classList.toggle("fa-eye");
    icon.classList.toggle("fa-eye-slash");
}
</script>
{% endblock %}
